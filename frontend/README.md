# MedSecure – Medical Steganography

Securely hide encrypted patient data inside PNG images or WAV audio files. This app has three parts:

- `frontend` (this folder): React + Vite UI
- `node-backend`: API, auth, and message routing
- `stego-service`: Flask service for PNG/WAV steganography + Fernet crypto

## Features
- Encrypt & Send: hide data into PNG/WAV and send to a doctor
- Inbox: view received items, download stego and original files
- Sent: see what you sent; original file download keeps its extension
- Decrypt: upload a stego file to extract and view the payload

## Prerequisites
- Node.js 18+
- Python 3.10+
- MongoDB (connection string required)

## Environment
Frontend uses `VITE_API_URL` to reach the Node API (defaults to `http://localhost:4000`).

Node backend requires:
- `MONGO_URI` – Mongo connection string
- `JWT_SECRET` – token signing key
- `CLIENT_ORIGIN` – e.g. `http://localhost:5173`
- `STEGO_SERVICE_URL` – e.g. `http://127.0.0.1:6001`
(Optional) Cloudinary: `CLOUDINARY_CLOUD_NAME`, `CLOUDINARY_API_KEY`, `CLOUDINARY_API_SECRET`

Stego service requires:
- `FERNET_KEY` – base64 key generated by `Fernet.generate_key()`

## Run locally (separate terminals)

1) Stego service (Flask)
```powershell
cd stego-service
pip install -r requirements.txt
$env:FERNET_KEY="<your_fernet_key>"
python app.py
```

2) Node backend
```powershell
cd node-backend
npm install
$env:MONGO_URI="mongodb://localhost:27017/medsecure"
$env:JWT_SECRET="changeme"
$env:CLIENT_ORIGIN="http://localhost:5173"
$env:STEGO_SERVICE_URL="http://127.0.0.1:6001"
npm run dev
```

3) Frontend
```powershell
cd frontend
npm install
$env:VITE_API_URL="http://localhost:4000"
npm run dev
```

## Usage Flow
1. Register and login
2. From Dashboard → Quick Actions
	- Encrypt & Send: choose PNG/JPEG/WAV; image output is PNG, audio output is WAV
	- Inbox: download stego or the original file
	- Sent: download the original file (keeps the uploaded extension)
	- Decrypt: upload a stego PNG/WAV to reveal the payload modal

That’s it — keep all three services running while you use the app.
